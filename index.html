<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nostalgiacore</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Covered+By+Your+Grace&family=Rock+Salt&family=Monoton&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <h1 class="graffiti-title">www.Nostalgiacore.net</h1>
  </header>

  <main>
    <section class="track">
      <img src="images/Antartide.PNG.PNG" alt="Antartide">
      <audio id="audio1" src="audio/ANTARTIDE_snippet.mp3" data-phrase="Se la vuoi te la trovo"></audio>
      <button onclick="togglePlay('audio1', this)">Play/Pause</button>
      <div class="track-phrase" id="phrase1"></div>
    </section>

    <section class="track">
      <img src="images/Intro.PNG.PNG" alt="Intro">
      <audio id="audio2" src="audio/INTRO_snippet.mp3" data-phrase="Due pianeti uguali"></audio>
      <button onclick="togglePlay('audio2', this)">Play/Pause</button>
      <div class="track-phrase" id="phrase2"></div>
    </section>

    <section class="track">
      <img src="images/Penombra.PNG.PNG" alt="Penombra">
      <audio id="audio3" src="audio/PENOMBRA_snippet.mp3" data-phrase="La penombra tu l’hai vista più?"></audio>
      <button onclick="togglePlay('audio3', this)">Play/Pause</button>
      <div class="track-phrase" id="phrase3"></div>
    </section>

    <section class="track">
      <img src="images/Guai.PNG.PNG" alt="Guai">
      <audio id="audio4" src="audio/GUAI_snippet.mp3" data-phrase="Sì che sei strana"></audio>
      <button onclick="togglePlay('audio4', this)">Play/Pause</button>
      <div class="track-phrase" id="phrase4"></div>
    </section>

    <section class="track">
      <img src="images/Orecchini.PNG.PNG" alt="Orecchini">
      <audio id="audio5" src="audio/ORECCHINI_snippet.mp3" data-phrase="Non l’hai mai detto"></audio>
      <button onclick="togglePlay('audio5', this)">Play/Pause</button>
      <div class="track-phrase" id="phrase5"></div>
    </section>
  </main>

  <script>
    function togglePlay(audioId, btn) {
      const audio = document.getElementById(audioId);
      const phrase = document.getElementById("phrase" + audioId.slice(-1));
      const phraseText = audio.getAttribute("data-phrase");

      // Ferma tutti gli altri audio
      document.querySelectorAll("audio").forEach((a, i) => {
        if (a !== audio) {
          a.pause();
          document.getElementById("phrase" + (i + 1)).style.opacity = 0;
        }
      });

      if (audio.paused) {
        audio.play();
        btn.textContent = "Pause";
        phrase.textContent = phraseText;
        phrase.style.opacity = 1;

        // Nascondi frase dopo la durata dello snippet
        audio.onended = () => {
          phrase.style.opacity = 0;
          btn.textContent = "Play";
        };
      } else {
        audio.pause();
        btn.textContent = "Play";
        phrase.style.opacity = 0;
      }
    }
  </script>
</body>
</html>
